<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Download Vendors</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<link rel="stylesheet" href="styles.css" />
		<script type="module" src="js/navigation.js"></script>
		<script type="module" src="js/menu.js"></script>
		<script type="module" src="js/countdown.js"></script>
		<script src="check-vendors-access.js"></script>
		<script src="verify-vendors-data.js"></script>
		<style>
			/* CSS Variables for consistent styling */
			:root {
				--primary-color: #23bfcf;
				--primary-glow: rgba(35, 191, 207, 0.5);
				--primary-glow-transparent: rgba(35, 191, 207, 0);
				--accent-color: #00ffc3;
				--accent-glow: rgba(0, 255, 195, 0.5);
				--black-bg: #000;
				--transition-smooth: all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
				--border-radius-bubble: 50%;
				--border-radius-text: 12px;
				--bubble-size-default: 180px;
				--bubble-size-tablet: 140px;
				--bubble-size-mobile: 110px;
				--bubble-size-small: 100px;
			}

			/* Base styles */
			body {
				margin: 0;
				background: linear-gradient(
						rgba(0, 0, 0, 0.3),
						rgba(0, 0, 0, 0.4)
					),
					url("assets/timetable_background.png") center/cover
						no-repeat fixed;
				overflow: hidden;
				font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
				color: white;
				perspective: 1000px;
			}

			/* Floating particles background */
			.particles {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				pointer-events: none;
				z-index: 0;
			}

			.particle {
				position: absolute;
				width: 2px;
				height: 2px;
				background: var(--accent-color);
				border-radius: 50%;
				animation: float-particle 8s infinite ease-in-out;
				opacity: 0.3;
			}

			@keyframes float-particle {
				0%,
				100% {
					transform: translateY(100vh) translateX(0) scale(0.5);
					opacity: 0;
				}
				50% {
					opacity: 0.8;
					transform: translateY(0) translateX(50px) scale(1);
				}
			}

			/* Main container for all content */
			.content-container {
				position: fixed;
				top: 80px;
				left: 0;
				width: 100vw;
				height: calc(100vh - 80px);
				display: flex;
				align-items: flex-start;
				justify-content: center;
				padding-top: 40px;
				overflow-y: auto;
			}

			/* Common selector styles for zone, category and type selectors */
			.selector-grid {
				position: relative;
				display: grid;
				grid-template-columns: repeat(4, 1fr);
				gap: 2rem;
				justify-content: center;
				width: 100%;
				max-width: 1200px;
				margin: 0 auto;
				transition: var(--transition-smooth);
				z-index: 2;
				padding-top: 120px;
				padding-left: 20px;
				padding-right: 20px;
			}

			/* Common bubble styles */
			.bubble {
				width: 100%;
				height: auto;
				aspect-ratio: 1/1;
				border-radius: var(--border-radius-bubble);
				background: var(--black-bg);
				display: flex;
				align-items: center;
				justify-content: center;
				cursor: pointer;
				transition: var(--transition-smooth);
				transform-style: preserve-3d;
				position: relative;
				overflow: visible;
				text-align: center;
				color: white;
				z-index: 3;
				outline: none;
				border: none;
				box-shadow: none;
				will-change: transform;
				margin: 0 auto;
				max-width: 180px;
			}

			@media (min-width: 768px) {
				.selector-grid {
					grid-template-columns: repeat(2, 1fr);
					gap: 1.5rem;
				}
			}

			@media (max-width: 768px) {
				.selector-grid {
					grid-template-columns: repeat(2, 1fr);
					gap: 1.5rem;
				}

				.bubble {
					width: var(--bubble-size-tablet);
					height: var(--bubble-size-tablet);
				}
			}

			/* Common glow effect for all bubbles */
			.bubble::after {
				content: "";
				position: absolute;
				top: 50%;
				left: 50%;
				width: 100%;
				height: 100%;
				border-radius: var(--border-radius-bubble);
				transform: translate(-50%, -50%) scale(1.3);
				z-index: -1;
				pointer-events: none;
				animation: pulse 3s infinite ease-in-out;
				animation-delay: var(--animation-delay, 0s);
				transition: var(--transition-smooth);
			}

			/* Bubble hover effects */
			.bubble:hover {
				transform: scale(1.05);
			}

			.bubble:hover::after {
				transform: translate(-50%, -50%) scale(1.5);
				opacity: 0.9;
				transition: var(--transition-smooth);
			}

			/* Common text styles for bubble text */
			.bubble-text {
				position: relative;
				z-index: 4;
				background: rgba(0, 0, 0, 0.8);
				padding: 10px 16px;
				border-radius: var(--border-radius-text);
				backdrop-filter: blur(15px);
				box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
				font-weight: 700;
				text-transform: uppercase;
				letter-spacing: 1px;
				text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
				transition: var(--transition-smooth);
				will-change: transform;
			}

			.bubble:hover .bubble-text {
				transform: scale(1.05);
				background: rgba(0, 0, 0, 0.9);
				backdrop-filter: blur(20px);
				box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5),
					inset 0 3px 0 rgba(255, 255, 255, 0.2);
				transition: var(--transition-smooth);
			}

			/* Zone bubble specific styles */
			.zone-selector {
				animation: morphIn 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55)
					forwards;
			}

			.zone-bubble::after {
				background: radial-gradient(
					circle,
					var(--primary-glow) 0%,
					var(--primary-glow-transparent) 70%
				);
				animation-name: pulseCyan;
			}

			.zone-bubble:focus {
				outline: none;
				box-shadow: 0 0 50px var(--accent-color),
					0 0 100px var(--accent-color),
					inset 0 0 30px rgba(0, 255, 195, 0.2),
					0 20px 40px rgba(0, 0, 0, 0.3);
			}

			.zone-text {
				font-size: 1.1rem;
				border: 2px solid rgba(35, 191, 207, 0.5);
				color: var(--primary-color);
			}

			.zone-bubble:hover .zone-text {
				border-color: rgba(35, 191, 207, 0.8);
			}

			@keyframes pulseCyan {
				0%,
				100% {
					transform: translate(-50%, -50%) scale(1.3);
					opacity: 0.7;
				}
				50% {
					transform: translate(-50%, -50%) scale(1.5);
					opacity: 0.9;
				}
			}

			/* Category & Type bubble specific styles */
			.zone-selector,
			.category-selector,
			#typeSelector {
				display: none;
				grid-template-columns: repeat(4, 1fr);
				width: 100%;
				animation: morphIn 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55)
					forwards;
			}

			.category-bubble::after {
				background: radial-gradient(
					circle,
					var(--primary-glow) 0%,
					var(--primary-glow-transparent) 70%
				);
				animation-name: pulseCyan;
			}

			.category-bubble {
				flex-direction: column;
				font-size: 0.9rem;
				font-weight: 600;
			}

			.category-bubble .icon {
				font-size: 2rem;
				margin-bottom: 0.5rem;
				transition: transform 0.3s ease;
				position: relative;
				z-index: 2;
			}

			.category-bubble:hover .icon {
				transform: scale(1.1);
			}

			.type-text {
				position: relative;
				z-index: 4;
				background: rgba(0, 0, 0, 0.8);
				padding: 8px 14px;
				border-radius: 10px;
				backdrop-filter: blur(15px);
				border: 2px solid rgba(35, 191, 207, 0.5);
				box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
				font-size: 0.9rem;
				font-weight: 600;
				text-transform: uppercase;
				letter-spacing: 1px;
				color: var(--primary-color);
				transition: var(--transition-smooth);
			}

			.category-bubble:hover .type-text {
				transform: scale(1.05);
				background: rgba(0, 0, 0, 0.9);
				backdrop-filter: blur(20px);
				box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5),
					inset 0 3px 0 rgba(255, 255, 255, 0.2);
				border-color: rgba(35, 191, 207, 0.8);
			}

			/* Vendor Display */
			.vendor-grid {
				position: relative;
				display: none;
				flex-wrap: wrap;
				gap: 1.5rem;
				justify-content: center;
				max-width: 80vw;
				max-height: 70vh;
				overflow-y: auto;
				z-index: 2;
				animation: cascadeIn 0.6s ease forwards;
				padding: 20px;
			}

			.vendor-bubble {
				width: 100px;
				height: 100px;
				border-radius: 50%;
				background: linear-gradient(135deg, #0f3460 0%, #0e4b99 100%);
				box-shadow: 0 0 15px #4ecdc4, 0 0 30px rgba(78, 205, 196, 0.3),
					inset 0 0 10px rgba(78, 205, 196, 0.1);
				display: flex;
				align-items: center;
				justify-content: center;
				font-size: 0.7rem;
				font-weight: 500;
				text-align: center;
				cursor: pointer;
				animation: popIn 0.5s ease forwards;
				opacity: 0;
				transform: scale(0);
				transition: all 0.3s ease;
				position: relative;
				padding: 10px;
				line-height: 1.2;
			}

			.vendor-bubble:hover {
				transform: scale(1.15);
				box-shadow: 0 0 25px #4ecdc4, 0 0 50px rgba(78, 205, 196, 0.5),
					inset 0 0 20px rgba(78, 205, 196, 0.2);
			}

			/* Back Button */
			.back-button {
				position: fixed;
				top: 120px;
				left: 50px;
				padding: 15px 25px;
				border-radius: 25px;
				background: linear-gradient(
					135deg,
					rgba(0, 0, 0, 0.8) 0%,
					rgba(34, 34, 34, 0.9) 100%
				);
				box-shadow: 0 0 20px rgba(0, 255, 195, 0.4),
					0 0 40px rgba(0, 255, 195, 0.2),
					inset 0 0 15px rgba(0, 255, 195, 0.1);
				display: none;
				align-items: center;
				justify-content: center;
				font-size: 1.1rem;
				font-weight: 600;
				color: var(--accent-color);
				cursor: pointer;
				transition: all 0.3s ease;
				z-index: 15;
				border: 2px solid rgba(0, 255, 195, 0.5);
				backdrop-filter: blur(10px);
				text-shadow: 0 0 10px rgba(0, 255, 195, 0.5);
				letter-spacing: 1px;
				text-transform: uppercase;
			}

			.back-button:hover {
				transform: scale(1.05) translateY(-2px);
				box-shadow: 0 0 30px rgba(0, 255, 195, 0.8),
					0 0 60px rgba(0, 255, 195, 0.5),
					inset 0 0 25px rgba(0, 255, 195, 0.3);
				background: linear-gradient(
					135deg,
					rgba(0, 0, 0, 0.9) 0%,
					rgba(34, 34, 34, 1) 100%
				);
				border-color: rgba(0, 255, 195, 0.8);
				text-shadow: 0 0 15px rgba(0, 255, 195, 0.8);
			}

			.back-button.show {
				display: flex;
				animation: backButtonIn 0.5s
					cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
			}

			@keyframes backButtonIn {
				0% {
					opacity: 0;
					transform: scale(0.3) translateX(-100px);
				}
				70% {
					transform: scale(1.1) translateX(5px);
				}
				100% {
					opacity: 1;
					transform: scale(1) translateX(0);
				}
			}

			/* Animations */
			@keyframes morphIn {
				0% {
					opacity: 0;
					transform: scale(0.3) rotateY(90deg);
				}
				50% {
					opacity: 0.8;
					transform: scale(1.1) rotateY(0deg);
				}
				100% {
					opacity: 1;
					transform: scale(1) rotateY(0deg);
				}
			}

			@keyframes cascadeIn {
				0% {
					opacity: 0;
					transform: translateY(50px) scale(0.8);
				}
				100% {
					opacity: 1;
					transform: translateY(0) scale(1);
				}
			}

			@keyframes popIn {
				0% {
					opacity: 0;
					transform: scale(0) rotateZ(180deg);
				}
				70% {
					transform: scale(1.1) rotateZ(0deg);
				}
				100% {
					opacity: 1;
					transform: scale(1) rotateZ(0deg);
				}
			}

			@keyframes slideOut {
				0% {
					opacity: 1;
					transform: scale(1);
				}
				100% {
					opacity: 0;
					transform: scale(0) rotateY(90deg);
				}
			}

			/* Popup Styles */
			.popup {
				position: fixed;
				top: 45%;
				left: 50%;
				transform: translate(-50%, -50%) scale(0);
				background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
				padding: 2rem;
				border-radius: 20px;
				box-shadow: 0 0 50px var(--accent-color),
					0 0 100px rgba(0, 255, 195, 0.3),
					inset 0 0 30px rgba(0, 255, 195, 0.1);
				z-index: 100;
				width: 80%;
				max-height: calc(100vh - 40px);
				overflow-y: auto;
				transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
				opacity: 0;
				box-sizing: border-box;
				margin: 0;
			}

			.popup.show {
				transform: translate(-50%, -50%) scale(1);
				opacity: 1;
			}

			.popup-header {
				display: flex;
				justify-content: space-between;
				align-items: flex-start;
				margin-bottom: 1rem;
			}

			.popup h3 {
				margin: 0;
				color: var(--accent-color);
				font-size: 1.4rem;
				font-weight: 700;
			}

			.popup-close {
				background: none;
				border: none;
				color: var(--accent-color);
				font-size: 1.8rem;
				cursor: pointer;
				transition: transform 0.2s ease;
				padding: 0;
				width: 30px;
				height: 30px;
				display: flex;
				align-items: center;
				justify-content: center;
			}

			.popup-close:hover {
				transform: scale(1.2) rotate(90deg);
			}

			.popup-image {
				width: 100%;
				height: 200px;
				object-fit: cover;
				border-radius: 15px;
				margin-bottom: 1.5rem;
				box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
			}

			.popup-section {
				margin-bottom: 1.5rem;
			}

			.popup-section h4 {
				color: #ff6b6b;
				margin: 0 0 0.5rem 0;
				font-size: 1rem;
				font-weight: 600;
			}

			.popup-description {
				color: #ccc;
				line-height: 1.5;
				margin-bottom: 1rem;
			}

			.popup-details {
				display: grid;
				gap: 0.8rem;
			}

			.detail-item {
				display: flex;
				align-items: center;
				gap: 0.8rem;
				padding: 0.5rem;
				background: rgba(255, 255, 255, 0.05);
				border-radius: 8px;
			}

			.detail-icon {
				font-size: 1.2rem;
				color: #4ecdc4;
				width: 20px;
				text-align: center;
			}

			.menu-grid {
				display: grid;
				gap: 0.8rem;
				margin-top: 1rem;
			}

			.menu-item {
				background: rgba(255, 255, 255, 0.05);
				padding: 1rem;
				border-radius: 10px;
				border-left: 3px solid #4ecdc4;
			}

			.menu-item-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 0.5rem;
			}

			.menu-item-name {
				font-weight: 600;
				color: var(--accent-color);
			}

			.menu-item-price {
				font-weight: 700;
				color: #ff6b6b;
			}

			.menu-item-description {
				color: #aaa;
				font-size: 0.9rem;
				line-height: 1.3;
			}

			.dietary-tags {
				display: flex;
				gap: 0.5rem;
				margin-top: 0.5rem;
			}

			.dietary-tag {
				background: #4ecdc4;
				color: #000;
				padding: 0.2rem 0.5rem;
				border-radius: 15px;
				font-size: 0.7rem;
				font-weight: 600;
			}

			/* Overlay */
			.popup-overlay {
				position: relative;
				top: 0;
				left: 0;
				width: 100vw;
				height: 100vh;
				backdrop-filter: blur(5px);
				z-index: 99;
				opacity: 0;
				transition: opacity 0.3s ease;
				pointer-events: none;
			}

			.popup-overlay.show {
				opacity: 1;
				pointer-events: all;
			}

			/* Responsive styles */
			@media (min-width: 768px) {
				.selector-grid {
					grid-template-columns: repeat(4, 1fr);
					gap: 3rem;
				}
			}

			/* Tablet-sized screens */
			@media (max-width: 768px) {
				body {
					padding: 8px;
				}

				.content-container {
					top: 120px;
					height: calc(100vh - 120px);
					padding: 10px;
				}

				.selector-grid {
					gap: 1.5rem;
					max-width: 100%;
					padding: 0 10px;
				}

				.bubble {
					width: var(--bubble-size-tablet);
					height: var(--bubble-size-tablet);
					min-width: 44px;
					min-height: 44px;
				}

				.bubble-text {
					padding: 12px 20px;
					font-size: 1rem;
					letter-spacing: 1px;
				}

				.category-bubble {
					width: 120px;
					height: 120px;
					font-size: 0.85rem;
					min-width: 44px;
					min-height: 44px;
				}

				.category-bubble .icon {
					font-size: 1.8rem;
					margin-bottom: 0.4rem;
				}

				.vendor-bubble {
					width: 90px;
					height: 90px;
					font-size: 0.65rem;
					padding: 8px;
					min-width: 44px;
					min-height: 44px;
				}

				.vendor-grid {
					max-width: 95vw;
					max-height: 65vh;
					padding: 15px;
					gap: 1.2rem;
				}

				.back-button {
					top: 90px;
					left: 20px;
					padding: 12px 20px;
					font-size: 1rem;
					min-width: 44px;
					min-height: 44px;
				}

				.popup {
					width: 95vw;
					max-width: none;
					max-height: calc(100vh - 40px);
					padding: 1.5rem;
					margin: 10px;
					border-radius: 15px;
				}

				.popup-image {
					height: 150px;
					margin-bottom: 1rem;
				}

				.popup h3 {
					font-size: 1.2rem;
				}

				.popup-close {
					font-size: 1.6rem;
					width: 35px;
					height: 35px;
					min-width: 44px;
					min-height: 44px;
				}
			}

			/* Mobile-sized screens */
			@media (max-width: 640px) {
				.content-container {
					top: 100px;
					height: calc(100vh - 100px);
				}

				.selector-grid {
					gap: 1rem;
				}

				.bubble {
					width: 120px;
					height: 120px;
					font-size: 0.9rem;
				}

				.bubble-text {
					padding: 10px 16px;
					font-size: 0.9rem;
					letter-spacing: 1px;
				}

				.category-bubble {
					width: 100px;
					height: 100px;
					font-size: 0.8rem;
				}

				.category-bubble .icon {
					font-size: 1.6rem;
				}

				.vendor-bubble {
					width: 80px;
					height: 80px;
					font-size: 0.6rem;
					padding: 6px;
				}

				.back-button {
					top: 80px;
					left: 15px;
					padding: 10px 16px;
					font-size: 0.9rem;
				}
			}

			/* Small mobile screens */
			@media (max-width: 480px) {
				body {
					padding: 4px;
				}

				.content-container {
					top: 90px;
					height: calc(100vh - 90px);
					padding: 5px;
				}

				.selector-grid {
					gap: 0.8rem;
					max-width: 280px;
				}

				.bubble {
					width: var(--bubble-size-mobile);
					height: var(--bubble-size-mobile);
					font-size: 0.8rem;
				}

				.bubble-text {
					padding: 8px 12px;
					font-size: 0.8rem;
					letter-spacing: 0.5px;
				}

				.category-bubble {
					width: 80px;
					height: 80px;
					font-size: 0.7rem;
				}

				.category-bubble .icon {
					font-size: 1.4rem;
					margin-bottom: 0.3rem;
				}

				.vendor-bubble {
					width: 70px;
					height: 70px;
					font-size: 0.55rem;
					padding: 4px;
				}

				.vendor-grid {
					gap: 1rem;
					padding: 10px;
					max-height: 60vh;
				}

				.back-button {
					top: 70px;
					left: 10px;
					padding: 8px 12px;
					font-size: 0.8rem;
				}

				.popup {
					padding: 1rem;
					margin: 5px;
				}

				.popup-image {
					height: 120px;
				}

				.popup h3 {
					font-size: 1.1rem;
				}

				.menu-item {
					padding: 0.8rem;
				}

				.detail-item {
					padding: 0.4rem;
					gap: 0.6rem;
				}
			}

			/* Landscape mobile optimizations */
			@media (max-width: 768px) and (orientation: landscape) {
				.content-container {
					top: 70px;
					height: calc(100vh - 70px);
				}

				.selector-grid {
					gap: 1rem;
				}

				.bubble {
					width: var(--bubble-size-small);
					height: var(--bubble-size-small);
				}

				.category-bubble {
					width: 80px;
					height: 80px;
				}

				.vendor-grid {
					max-height: 55vh;
				}

				.back-button {
					top: 50px;
				}
			}

			/* Touch device optimizations */
			@media (hover: none) and (pointer: coarse) {
				.bubble:hover,
				.vendor-bubble:hover,
				.back-button:hover,
				.popup-close:hover {
					/* Remove hover effects on touch devices */
					transform: none;
					box-shadow: inherit;
				}

				.bubble:active,
				.vendor-bubble:active {
					transform: scale(0.95);
					transition: transform 0.1s ease;
				}

				.back-button:active,
				.popup-close:active {
					transform: scale(0.95);
					transition: transform 0.1s ease;
				}

				/* Better touch targets */
				.bubble,
				.vendor-bubble,
				.back-button,
				.popup-close {
					min-width: 44px;
					min-height: 44px;
				}
			}

			/* Very small screens */
			@media (max-width: 360px) {
				.selector-grid {
					gap: 0.6rem;
				}

				.bubble {
					width: 90px;
					height: 90px;
					font-size: 0.7rem;
				}

				.bubble-text {
					padding: 6px 10px;
					font-size: 0.7rem;
				}

				.category-bubble {
					width: 70px;
					height: 70px;
					font-size: 0.65rem;
				}

				.vendor-bubble {
					width: 60px;
					height: 60px;
					font-size: 0.5rem;
				}

				.popup {
					padding: 0.8rem;
				}
			}

			/* Add this inside your existing style tag, before the end of the styles section */
			/* Enhanced Vendor Bubble Styles */
			.vendor-grid {
				position: relative;
				display: none;
				flex-wrap: wrap;
				gap: 1.5rem;
				justify-content: center;
				max-width: 90vw;
				max-height: 70vh;
				overflow-y: auto;
				z-index: 2;
				animation: cascadeIn 0.6s ease forwards;
				padding: 30px 20px;
			}

			.vendor-bubble {
				width: 120px;
				height: 120px;
				border-radius: 50%;
				background: var(--black-bg);
				box-shadow: 0 0 15px var(--primary-glow),
					0 0 30px rgba(35, 191, 207, 0.2),
					inset 0 0 10px rgba(35, 191, 207, 0.1);
				display: flex;
				align-items: center;
				justify-content: center;
				font-size: 0.75rem;
				font-weight: 500;
				text-align: center;
				cursor: pointer;
				animation: popIn 0.5s ease forwards;
				opacity: 0;
				transform: scale(0);
				transition: var(--transition-smooth);
				position: relative;
				padding: 10px;
				line-height: 1.2;
				animation-fill-mode: both;
			}

			.vendor-bubble::after {
				content: "";
				position: absolute;
				top: 50%;
				left: 50%;
				width: 100%;
				height: 100%;
				border-radius: var(--border-radius-bubble);
				transform: translate(-50%, -50%) scale(1.3);
				z-index: -1;
				pointer-events: none;
				background: radial-gradient(
					circle,
					var(--primary-glow) 0%,
					var(--primary-glow-transparent) 70%
				);
				animation: pulseCyan 3s infinite ease-in-out;
				animation-delay: var(--animation-delay, 0s);
				transition: var(--transition-smooth);
			}

			.vendor-bubble:hover {
				transform: scale(1.1);
			}

			.vendor-bubble:hover::after {
				transform: translate(-50%, -50%) scale(1.5);
				opacity: 0.9;
			}

			.vendor-content {
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;
				width: 100%;
				height: 100%;
			}

			.vendor-icon {
				font-size: 1.8rem;
				margin-bottom: 0.5rem;
				transition: transform 0.3s ease;
			}

			.vendor-name {
				position: relative;
				z-index: 4;
				background: rgba(0, 0, 0, 0.8);
				padding: 6px 10px;
				border-radius: 10px;
				backdrop-filter: blur(15px);
				border: 2px solid rgba(35, 191, 207, 0.5);
				box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
				font-size: 0.75rem;
				font-weight: 600;
				text-transform: uppercase;
				letter-spacing: 0.5px;
				color: var(--primary-color);
				transition: var(--transition-smooth);
				max-width: 100%;
				overflow: hidden;
				text-overflow: ellipsis;
				white-space: nowrap;
			}

			.vendor-bubble:hover .vendor-icon {
				transform: scale(1.1);
			}

			.vendor-bubble:hover .vendor-name {
				transform: scale(1.05);
				background: rgba(0, 0, 0, 0.9);
				backdrop-filter: blur(20px);
				box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5),
					inset 0 3px 0 rgba(255, 255, 255, 0.2);
				border-color: rgba(35, 191, 207, 0.8);
			}

			/* Update responsive styles for vendor bubbles */
			@media (max-width: 768px) {
				.vendor-bubble {
					width: 100px;
					height: 100px;
				}

				.vendor-icon {
					font-size: 1.6rem;
					margin-bottom: 0.3rem;
				}

				.vendor-name {
					padding: 5px 8px;
					font-size: 0.7rem;
				}
			}

			@media (max-width: 480px) {
				.vendor-bubble {
					width: 90px;
					height: 90px;
				}

				.vendor-icon {
					font-size: 1.4rem;
				}

				.vendor-name {
					padding: 4px 7px;
					font-size: 0.65rem;
				}
			}
		</style>
	</head>
	<body class="bg-black text-white p-2 sm:p-4 vendors-page">
		<!-- Navigation Component Placeholder -->
		<div id="navigation-placeholder"></div>

		<!-- Floating particles background -->
		<div class="particles" id="particles"></div>

		<!-- Loading Indicator -->
		<div
			id="loading-indicator"
			class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50"
			style="display: none"
		>
			<div class="text-center">
				<div
					class="inline-block animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-400 mb-4"
				></div>
				<p class="text-cyan-400 text-lg">Loading vendor data...</p>
			</div>
		</div>

		<!-- Main content container -->
		<div class="content-container">
			<!-- Zone Selection (Level 1) -->
			<div class="selector-grid zone-selector" id="zoneSelector">
				<!-- Location bubbles will be dynamically added here -->
			</div>

			<!-- Type Selection (Level 2) -->
			<div class="selector-grid category-selector" id="typeSelector">
				<!-- Types will be populated dynamically -->
			</div>

			<!-- Category Selection (Level 3) -->
			<div class="selector-grid category-selector" id="categorySelector">
				<!-- Categories will be populated dynamically -->
			</div>

			<!-- Vendor Grid (Level 4) -->
			<div class="vendor-grid" id="vendorGrid">
				<!-- Vendors will be populated dynamically -->
			</div>

			<!-- Back Button -->
			<div class="back-button" id="backButton" onclick="goBack()">
				‚Üê Back
			</div>
		</div>

		<!-- Popup -->
		<div
			class="popup-overlay"
			id="popupOverlay"
			onclick="closePopup()"
		></div>
		<div class="popup" id="vendorPopup">
			<div class="popup-header">
				<h3 id="popupName"></h3>
				<button class="popup-close" onclick="closePopup()">
					&times;
				</button>
			</div>

			<img
				id="popupImage"
				class="popup-image"
				src=""
				alt="Vendor Image"
			/>

			<div class="popup-section">
				<p id="popupDescription" class="popup-description"></p>
			</div>

			<div class="popup-section">
				<div class="popup-details" id="popupDetails">
					<!-- Details will be populated dynamically -->
				</div>
			</div>

			<div class="popup-section" id="menuSection">
				<h4><span class="detail-icon">üçΩÔ∏è</span> Menu</h4>
				<div class="menu-grid" id="menuGrid">
					<!-- Menu items will be populated dynamically -->
				</div>
			</div>
		</div>

		<!-- Vendor Detail Modal -->
		<div
			id="vendor-modal"
			class="fixed inset-0 z-50 flex items-center justify-center hidden"
		>
			<div
				class="absolute inset-0 bg-black bg-opacity-75"
				id="vendor-modal-backdrop"
			></div>
			<div
				class="relative z-10 bg-gray-900 border border-cyan-800 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto"
			>
				<div
					class="sticky top-0 bg-gray-900 p-4 border-b border-gray-700 flex justify-between items-center"
				>
					<h2
						id="vendor-modal-title"
						class="text-2xl font-bold text-white"
					></h2>
					<button
						id="vendor-modal-close"
						class="text-gray-400 hover:text-white"
					>
						<svg
							xmlns="http://www.w3.org/2000/svg"
							class="h-6 w-6"
							fill="none"
							viewBox="0 0 24 24"
							stroke="currentColor"
						>
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-width="2"
								d="M6 18L18 6M6 6l12 12"
							/>
						</svg>
					</button>
				</div>
				<div id="vendor-modal-content" class="p-4">
					<!-- Content will be populated by JavaScript -->
				</div>
			</div>
		</div>
	</body>
</html>

<script>
	document.addEventListener("DOMContentLoaded", function () {
		// Show loading indicator
		document.getElementById("loading-indicator").style.display = "flex";

		// Initialize the navigation component for vendors page
		import("./js/navigation.js").then((module) => {
			const NavigationComponent = module.default;
			const navigationComponent = new NavigationComponent();
			navigationComponent.init("#navigation-placeholder");
		});

		// Test direct file access to vendors-data.json
		fetch("vendors-data.json")
			.then((response) => {
				return response.text();
			})
			.then((text) => {
				// Test if JSON is valid
				try {
					JSON.parse(text);
				} catch (error) {
					console.error("JSON parsing error:", error);
				}
			})
			.catch((error) => console.error("File access error:", error));
	});

	// State management
	let currentLevel = "location";
	let currentZone = "";
	let currentType = null;
	let currentCategory = "";
	let vendorsData = {};
	let navigationStack = [];
	let currentVendors = [];

	// Category mappings with icons
	const categoryMappings = {
		food: {icon: "üçï", name: "Food"},
		beverage: {icon: "üçπ", name: "Beverages"},
		drinks: {icon: "üç∫", name: "Drinks"},
		merch: {icon: "üëï", name: "Merchandise"},
		other: {icon: "üé™", name: "Other"},
	};

	// Initialize the app
	async function init() {
		try {
			document.getElementById("loading-indicator").style.display = "flex";

			// Load vendors data first
			await loadVendorsData();

			console.log("Vendors data loaded:", vendorsData); // Debug output

			// Create particles in parallel with bubbles
			createParticles();

			// Make sure we have the vendor data before creating bubbles
			if (
				vendorsData &&
				vendorsData.zones &&
				vendorsData.zones.length > 0
			) {
				createLocationBubbles();

				// Show the zone selector explicitly
				const zoneSelector = document.getElementById("zoneSelector");
				zoneSelector.style.display = "grid";
			} else {
				console.error(
					"No vendor data available or invalid structure:",
					vendorsData
				);
			}

			document.getElementById("loading-indicator").style.display = "none";
		} catch (error) {
			console.error("Error initializing page:", error);
			document.getElementById("loading-indicator").style.display = "none";

			// Display error to user
			alert("Error loading vendor data. Please try refreshing the page.");
		}
	}

	// Load vendors data from JSON
	async function loadVendorsData() {
		try {
			const response = await fetch("vendors-data.json");

			if (!response.ok) {
				throw new Error(`Failed to load data: ${response.status}`);
			}

			const data = await response.json();

			// Validate data structure
			if (!data || !data.zones || !Array.isArray(data.zones)) {
				throw new Error("Invalid vendor data structure");
			}

			vendorsData = data;
			console.log("Successfully loaded vendor data");

			return data;
		} catch (error) {
			console.error("Error loading vendors data:", error);
			throw error;
		}
	}

	// Create animated particle background
	function createParticles() {
		const container = document.getElementById("particles");
		const particleCount = 50;

		for (let i = 0; i < particleCount; i++) {
			const particle = document.createElement("div");
			particle.className = "particle";

			// Random position and animation delay
			const left = Math.random() * 100;
			const delay = Math.random() * 5;

			particle.style.left = `${left}%`;
			particle.style.animationDelay = `${delay}s`;

			container.appendChild(particle);
		}
	}

	// Create dynamic location bubbles
	function createLocationBubbles() {
		const zoneSelector = document.getElementById("zoneSelector");
		zoneSelector.innerHTML = ""; // Clear any existing content

		if (
			!vendorsData ||
			!vendorsData.zones ||
			vendorsData.zones.length === 0
		) {
			console.error(
				"No vendor data available to create location bubbles"
			);
			zoneSelector.innerHTML =
				"<p style='color:white;text-align:center;'>No location data available</p>";
			return;
		}

		// Extract all unique locations from vendor data
		const locations = new Set();
		vendorsData.zones.forEach((vendor) => {
			if (vendor.location) {
				if (Array.isArray(vendor.location)) {
					vendor.location.forEach((loc) => {
						if (loc && loc.trim()) {
							locations.add(loc.trim());
						}
					});
				} else if (typeof vendor.location === "string") {
					// Handle case where location might be a string
					locations.add(vendor.location.trim());
				}
			}
		});

		console.log("Found locations:", Array.from(locations)); // Debug

		if (locations.size === 0) {
			zoneSelector.innerHTML =
				"<p style='color:white;text-align:center;'>No locations found in data</p>";
			return;
		}

		// Style mapping for specific locations
		const locationStyles = {
			Arena: "arena",
			"District X": "districtx",
			RIP: "rip",
			Plus: "plus",
			Guest: "guest",
			Purple: "purple",
			Access: "access",
			Blue: "blue",
			Orange: "orange",
			Yellow: "yellow",
			Red: "red",
		};

		// Create bubble for each location
		locations.forEach((location) => {
			const bubble = document.createElement("div");

			// Add appropriate class based on location name
			const locationClass = locationStyles[location] || "";
			bubble.className = `bubble zone-bubble ${locationClass}`;
			bubble.onclick = () => selectZone(location);

			// Add random animation delay to each bubble's ::after element
			const randomDelay = Math.random() * 3; // Random delay between 0 and 3 seconds
			bubble.style.setProperty("--animation-delay", `${randomDelay}s`);

			const textDiv = document.createElement("div");
			textDiv.className = "bubble-text zone-text";
			textDiv.textContent = location;

			bubble.appendChild(textDiv);
			zoneSelector.appendChild(bubble);
		});
	}

	// Zone selection
	function selectZone(zone) {
		currentZone = zone;
		currentLevel = "type";
		navigationStack.push("zone");

		// Show back button
		document.getElementById("backButton").classList.add("show");
		backButton.classList.add("show");

		// Morph zone selector out
		const zoneSelector = document.getElementById("zoneSelector");
		zoneSelector.style.animation =
			"slideOut 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards";

		setTimeout(() => {
			zoneSelector.style.display = "none";
			typeSelector.style.display = "grid";

			showTypes();
		}, 600);
	}

	// Show types for selected zone
	function showTypes() {
		const typeSelector = document.getElementById("typeSelector");

		// Filter vendors by the selected zone
		const vendors = vendorsData.zones.filter(
			(vendor) =>
				Array.isArray(vendor.location) &&
				vendor.location.some(
					(loc) =>
						loc.trim().toLowerCase() ===
						currentZone.trim().toLowerCase()
				)
		);

		// Get unique types
		const types = new Set();

		vendors.forEach((vendor) => {
			if (vendor.type) {
				if (Array.isArray(vendor.type)) {
					vendor.type.forEach((t) => types.add(t));
				} else {
					types.add(vendor.type);
				}
			}
		});

		// Add default type
		if (vendors.length > 0) {
			types.add("All");
		}

		// Clear and populate types
		typeSelector.innerHTML = "";

		// Convert set to array
		const typesArray = Array.from(types);

		typesArray.forEach((type) => {
			let typeInfo = {icon: "üé™", name: type};

			switch (type.toLowerCase()) {
				case "all":
					typeInfo = {icon: "üé™", name: "All Types"};
					break;
				case "food":
					typeInfo = {icon: "üçï", name: "Food"};
					break;
				case "drinks":
					typeInfo = {icon: "üçª", name: "Drinks & Bars"};
					break;
				case "experience":
					typeInfo = {icon: "üé†", name: "Experience"};
					break;
			}

			const bubble = document.createElement("div");
			bubble.className = "bubble category-bubble";

			// Add random animation delay
			const randomDelay = Math.random() * 3;
			bubble.style.setProperty("--animation-delay", `${randomDelay}s`);

			bubble.onclick = () => selectType(type);

			bubble.innerHTML = `
      <div class="icon">${typeInfo.icon}</div>
      <div class="type-text">${typeInfo.name}</div>
    `;

			typeSelector.appendChild(bubble);
		});

		// Show with grid display instead of flex
		typeSelector.style.display = "grid";
	}

	// Type selection
	function selectType(type) {
		currentType = type;
		currentLevel = "category";
		navigationStack.push("type");

		// Morph type selector out
		const typeSelector = document.getElementById("typeSelector");
		typeSelector.style.animation =
			"slideOut 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards";

		setTimeout(() => {
			typeSelector.style.display = "none";
			categorySelector.style.display = "grid";

			showCategories();
		}, 600);
	}

	// Show categories for selected zone and type
	function showCategories() {
		const categorySelector = document.getElementById("categorySelector");

		// Filter vendors by the selected zone
		const allVendors = vendorsData.zones.filter(
			(vendor) =>
				Array.isArray(vendor.location) &&
				vendor.location.some(
					(loc) =>
						loc.trim().toLowerCase() ===
						currentZone.trim().toLowerCase()
				)
		);

		// Filter vendors by type
		let vendors;
		if (currentType === "All") {
			vendors = allVendors;
		} else {
			vendors = allVendors.filter((vendor) => {
				if (Array.isArray(vendor.type)) {
					return vendor.type.some((t) => t === currentType);
				} else {
					return vendor.type === currentType;
				}
			});
		}

		// Get unique categories from the category arrays
		const categories = new Set();

		vendors.forEach((vendor) => {
			if (vendor.category && Array.isArray(vendor.category)) {
				vendor.category.forEach((cat) => categories.add(cat));
			}
		});

		// Add default category if there are vendors
		if (vendors.length > 0) {
			categories.add("All");
		}

		// Clear and populate categories
		categorySelector.innerHTML = "";
		Array.from(categories).forEach((category) => {
			let categoryInfo = {icon: "üé™", name: category};

			// Map known categories to better icons
			switch (category) {
				case "All":
					categoryInfo = {icon: "üé™", name: "All Vendors"};
					break;
				case "Halal":
					categoryInfo = {icon: "üïå", name: "Halal"};
					break;
				case "Vegan Options":
					categoryInfo = {icon: "üå±", name: "Vegan Options"};
					break;
				case "Vegetarian Options":
					categoryInfo = {icon: "ü•ó", name: "Vegetarian"};
					break;
				case "Gluten Free Options":
					categoryInfo = {icon: "üåæ", name: "Gluten Free"};
					break;
				case "Meals under ¬£10":
					categoryInfo = {icon: "üí∞", name: "Budget Friendly"};
					break;
				case "Bar":
					categoryInfo = {icon: "üç∫", name: "Bars"};
					break;
				// Add more category mappings as needed
			}

			const bubble = document.createElement("div");
			bubble.className = "bubble category-bubble";

			// Add random animation delay
			const randomDelay = Math.random() * 3;
			bubble.style.setProperty("--animation-delay", `${randomDelay}s`);

			bubble.onclick = () => selectCategory(category);
			bubble.innerHTML = `
            <div class="icon">${categoryInfo.icon}</div>
            <div class="type-text">${categoryInfo.name}</div>
        `;
			categorySelector.appendChild(bubble);
		});

		// Show with animation
		categorySelector.style.display = "grid";
	}

	// Category selection
	function selectCategory(category) {
		currentCategory = category;
		currentLevel = "vendor";
		navigationStack.push("category");

		// Morph category selector out
		const categorySelector = document.getElementById("categorySelector");
		categorySelector.style.animation =
			"slideOut 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards";

		setTimeout(() => {
			categorySelector.style.display = "none";
			showVendors();
		}, 600);
	}

	// Show vendors for selected zone, type, and category
	// Replace the showVendors function with this improved version
	function showVendors() {
		const vendorGrid = document.getElementById("vendorGrid");

		// Filter vendors by the selected zone
		const allVendors = vendorsData.zones.filter(
			(vendor) =>
				Array.isArray(vendor.location) &&
				vendor.location.some(
					(loc) =>
						loc.trim().toLowerCase() ===
						currentZone.trim().toLowerCase()
				)
		);

		// Filter by type first
		let typeFilteredVendors;
		if (currentType === "All") {
			typeFilteredVendors = allVendors;
		} else {
			typeFilteredVendors = allVendors.filter((vendor) => {
				if (Array.isArray(vendor.type)) {
					return vendor.type.some((t) => t === currentType);
				} else {
					return vendor.type === currentType;
				}
			});
		}

		// Then filter by category
		let filteredVendors;
		if (currentCategory === "All") {
			filteredVendors = typeFilteredVendors;
		} else {
			filteredVendors = typeFilteredVendors.filter(
				(vendor) =>
					vendor.category &&
					Array.isArray(vendor.category) &&
					vendor.category.includes(currentCategory)
			);
		}

		// Store current vendors for reference
		currentVendors = filteredVendors;

		// Clear and populate vendors
		vendorGrid.innerHTML = "";

		filteredVendors.forEach((vendor, index) => {
			const bubble = document.createElement("div");
			bubble.className = "bubble vendor-bubble";

			// Add random animation delay
			const randomDelay = Math.random() * 3;
			bubble.style.setProperty("--animation-delay", `${randomDelay}s`);

			// Add animation delay for staggered appearance
			bubble.style.animationDelay = `${index * 0.1}s`;

			bubble.onclick = () => showVendorPopup(vendor);

			// Create icon based on vendor type
			let vendorIcon = "üçΩÔ∏è"; // Default icon

			if (vendor.type) {
				const type = Array.isArray(vendor.type)
					? vendor.type[0].toLowerCase()
					: vendor.type.toLowerCase();

				switch (type) {
					case "food":
						vendorIcon = "üçï";
						break;
					case "drinks":
					case "bar":
						vendorIcon = "üç∏";
						break;
					case "merchandise":
					case "merch":
						vendorIcon = "üëï";
						break;
					case "experience":
						vendorIcon = "üé≠";
						break;
				}
			}

			// Create bubble content with icon and name
			bubble.innerHTML = `
            <div class="vendor-content">
                <div class="vendor-icon">${vendorIcon}</div>
                <div class="vendor-name">${vendor.name}</div>
            </div>
        `;

			vendorGrid.appendChild(bubble);
		});

		// Show with animation
		vendorGrid.style.display = "flex";
	}

	// Show vendor popup
	function showVendorPopup(vendor) {
		// Populate popup content
		document.getElementById("popupName").textContent = vendor.name;

		// Determine vendor type
		let vendorTypeDisplay = Array.isArray(vendor.type)
			? vendor.type[0]
			: vendor.type;

		// Set the description
		document.getElementById(
			"popupDescription"
		).textContent = `${vendorTypeDisplay} vendor`;

		// Set image
		const image = document.getElementById("popupImage");
		if (vendor.image) {
			image.src = `assets/vendors/${vendor.image}`;
			image.style.display = "block";
		} else {
			image.style.display = "none";
		}

		// Populate details
		const detailsContainer = document.getElementById("popupDetails");

		// Get dietary info from categories
		const dietaryTags = vendor.category
			? vendor.category.filter((cat) =>
					[
						"Halal",
						"Vegan Options",
						"Vegetarian Options",
						"Gluten Free Options",
						"Totally Vegan",
					].includes(cat)
			  )
			: [];

		// Check if vendor is affordable
		const isAffordable = vendor.category
			? vendor.category.includes("Meals under ¬£10")
			: false;

		// Build details HTML
		detailsContainer.innerHTML = `
        <div class="detail-item">
            <span class="detail-icon">üìç</span>
            <span><strong>Zone:</strong> ${vendor.location.join(", ")}</span>
        </div>
        ${
			isAffordable
				? `
        <div class="detail-item">
            <span class="detail-icon">üí∞</span>
            <span><strong>Budget Friendly</strong></span>
        </div>
        `
				: ""
		}
        ${
			dietaryTags.length > 0
				? `
        <div class="detail-item">
            <span class="detail-icon">üå±</span>
            <span><strong>Dietary Options:</strong> ${dietaryTags.join(
				", "
			)}</span>
        </div>
        `
				: ""
		}
    `;

		// Check if menu exists
		const menuSection = document.getElementById("menuSection");
		const menuGrid = document.getElementById("menuGrid");

		if (vendor.menu && vendor.menu.length > 0) {
			menuSection.style.display = "block";
			menuGrid.innerHTML = "";

			// Add menu items
			vendor.menu.forEach((item) => {
				const menuItem = document.createElement("div");
				menuItem.className = "menu-item";
				menuItem.innerHTML = `<div class="menu-item-name">${item}</div>`;
				menuGrid.appendChild(menuItem);
			});
		} else {
			menuSection.style.display = "none";
		}

		// Show popup
		document.getElementById("popupOverlay").classList.add("show");
		document.getElementById("vendorPopup").classList.add("show");
	}

	// Close popup
	function closePopup() {
		document.getElementById("popupOverlay").classList.remove("show");
		document.getElementById("vendorPopup").classList.remove("show");
	}

	// Go back navigation
	function goBack() {
		if (navigationStack.length === 0) {
			console.error("Navigation stack is empty, cannot go back");
			return;
		}

		const previousLevel = navigationStack.pop();
		console.log(`Going back to ${previousLevel} from ${currentLevel}`);

		// Get all container elements
		const zoneSelector = document.getElementById("zoneSelector");
		const typeSelector = document.getElementById("typeSelector");
		const categorySelector = document.getElementById("categorySelector");
		const vendorGrid = document.getElementById("vendorGrid");
		const backButton = document.getElementById("backButton");

		// First hide current view with animation
		let currentContainer;
		if (currentLevel === "type") {
			currentContainer = typeSelector;
		} else if (currentLevel === "category") {
			currentContainer = categorySelector;
		} else if (currentLevel === "vendor") {
			currentContainer = vendorGrid;
		}

		if (currentContainer) {
			currentContainer.style.animation =
				"slideOut 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards";
		}

		// After animation completes, update state and show previous view
		setTimeout(() => {
			// Hide all containers first
			typeSelector.style.display = "none";
			categorySelector.style.display = "none";
			vendorGrid.style.display = "none";

			// Reset animation
			if (currentContainer) {
				currentContainer.style.animation = "";
			}

			if (previousLevel === "zone") {
				// Back to zone selection
				currentLevel = "zone";
				currentZone = null;
				currentType = null;
				currentCategory = null;

				// Hide back button
				backButton.classList.remove("show");

				// Show zone selector with animation
				zoneSelector.style.display = "grid";
				zoneSelector.style.animation =
					"morphIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards";
			} else if (previousLevel === "type") {
				// Back to type selection
				currentLevel = "type";
				currentType = null;
				currentCategory = null;

				// Show type selector with animation - FIX: Display typeSelector, not zoneSelector
				typeSelector.style.display = "grid"; // THIS LINE WAS WRONG
				typeSelector.style.animation =
					"morphIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards";
			} else if (previousLevel === "category") {
				// Back to category selection
				currentLevel = "category";
				currentCategory = null;

				// Show category selector with animation - FIX: Display categorySelector, not zoneSelector
				categorySelector.style.display = "grid"; // THIS LINE WAS WRONG
				categorySelector.style.animation =
					"morphIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards";
			}
		}, 400); // Match this timeout with the animation duration
	}

	// Initialize app when page loads
	document.addEventListener("DOMContentLoaded", init);

	// Close popup when clicking overlay
	document
		.getElementById("popupOverlay")
		.addEventListener("click", closePopup);
</script>
